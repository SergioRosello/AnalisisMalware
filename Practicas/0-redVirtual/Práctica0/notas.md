# Práctica 0: Creación de una Red Virtual para Realizar Análisis Controlados 

# Nombre: Sergio Roselló Morell

# Documentación de la arquitectura

La arquitectura inicial para las prácticas venideras, consiste en una máquina Ubuntu, que hará de servidor de red y simulará los servicios de Internet. 
Esta máquina tendrá la dirección IP `102.168.10.10`
La única máquina que estará en la red será un Windows 10, con dirección IP `192.168.10.20`.

# Instalación de las máquinas y creación del entorno

## Instalación de Windows

* Descargamos la máquina virtual de Windows desde Windows
* Desconectamos diréctamente la máquina virtual de Windows de la red, para poder configurar Windows sin crear una cuenta en Microsoft


## Instalación de Ubuntu

* Descargamos, de la página web oficial la imagen .iso
* Configuramos desde VirtualBox una interfaz de red host-only

## Descarga e instalación de inetSim en Ubuntu

Para la instalación de inetSim, seguimos la guía de la misma página

Los comandos que hemos seguido, en orden cronológico son:

`echo "deb http://www.inetsim.org/debian/ binary/" > /etc/apt/sources.list.d/inetsim.list'`

`apt update`

`apt install inetsim`

## Configuración de la red en Ubuntu

Como se ve en la figura 1, editamos el archivo `/etc/network/interfaces` para asegurarnos que la máquina virtual mantiene la misma dirección IP en la subred.
Además, cambiamos los valores en el archivo `/etc/inetsim/inetsim.conf` para configurar el servicio inetsim.

![Configuración red](./UbuntuNetworkConfiguration.png)

## Configuración de la red host-only

Para configurar la red, hemos ido a los ajustes de virtualbox, para crear una red host-only. 

* Hemos llamado a esta red `vboxnet0`.
* Hemos configurado el adaptador con la IP `192.168.10.1` y su máscara de red `255.255.255.0`

En cuanto al servidor DHCP:

* Dirección IP `192.168.10.2`
* Máscara de red `255.255.255.0`
* Dirección IP mínima `192.168.10.10`
* Dirección IP máxima `192.168.10.254`

Estos datos se pueden ver en la figura 2.

![Network](./VBoxNetwork.png)


## Configuración de Windows

* Descargamos los GuestAdditions en el sistema

### Configuración de la IP de la máquina Windows

* Como se ve en la figura 3, se configura la IP de forma manual para que tenga la IP 192.168.10.20

![Network Config](./W10NetConfig.png)

## Revisión de la visibilidad entre las máquinas

* Se prueba a hacer ping a la máquina Ubuntu, en la misma red
  * Se puede ver en la figura 4, que el ping, devuelve datos.

![pingWindows](./pingWindows.png)

* Se prueba a hacer ping desde Ubuntu a la máquina de Windows, pero esta deberá estar bloqueando los paquetes ICMP. 
* Se ha descargado nmap, para verificar que efectivamente si que hay visibilidad y se ha aplicado el flag `-Pn` para que presupona que la máquina si que está activa en esa dirección.
* El resultado del comando anterior está en la figura 5

![pingUbuntu](./pingWindowsFromUbuntu.png) 


# Forma de añadir los recursos a analizar

Existen varias formas para añadir los recursos a la red.
A continuación expodré algunas de ellas.

* Creación de un disco virtual y añadirlo a la máquina con la que se quiera analizar
* Creación de una carpeta compartida entre host y guest
* Levantar un servidor en la máquina host y (Cambiando el adaptador de red) solicitar el contenido deseado del mismo

Entre estas, la mejor forma de hacerlo, desde mi punto de vista, es creando una unidad virtual para añadir a la máquina.
Esta simulará un USB.
